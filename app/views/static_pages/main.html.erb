<div class="container-fluid">

<!-- http://stackoverflow.com/questions/22774780/bootstrap-full-width-text-input-within-inline-form -->
  <div class="row" id="main-search">
    <form accept-charset="UTF-8" action="/" method="get">
      <div style="margin:0;padding:0;display:inline"><input name="utf8" type="hidden" value="&#x2713;" /></div>
      <div class="col-lg-12">
        <div class="input-group input-group-lg">
          <input type="text" class="form-control input-lg" name="search" id="search-church" placeholder="Your query (Keywords, Phrases, Boolean Expressions)">
          <span class="input-group-btn">
            <button class="btn btn-default btn-lg" type="submit">Search</button>
          </span>
        </div>
      </div>
    </form>
  </div>
  
  <div class="row-fluid <%= if @only_search then 'hide' end %>">
    <div class="col-md-3" id="main-search-options">
      <h3>Options</h3>
      <p>Under construction!</p>
    </div>

    <div class="col-md-9" id="main-search-results">
      <div class="tabbable">
        <ul class="nav nav-tabs">
          <li class="active"><a href="#main-search-list" data-toggle="tab">Result List</a></li>
          <li><a href="#main-search-wordcloud" data-toggle="tab">Wordcloud</a></li>
          <li><a href="#main-search-timeline" data-toggle="tab">Timeline</a></li>
        </ul>
        <div class="tab-content">
          <div class="tab-pane active" id="main-search-list">
            <% if @documents.respond_to?(:total_count) and @documents.total_count > 0 %>
              <%= will_paginate @documents, :renderer => BootstrapPagination::Rails %>
              <table class="table">
                <thead>
                  <tr>
                    <th>Document ID</th>
                    <th>Document Title</th>
                    <th>Issue Date</th>
                    <th>Location</th>
                    <th colspan="3"></th>
                  </tr>
                </thead>
                
                <tbody>
                  <% @documents.each do |document| %>
                    <tr>
                      <td><%= document.docid %></td>
                      <td><%= document.title %></td>
                      <td><%= document.date %></td>
                      <td><%= document.location %></td>
                      <td><%= link_to 'Show', document %></td>
                    </tr>
                  <% end %>
                </tbody>
              </table>
              
            <% else %>
              
              <div class="alert alert-danger main-page-warning"><strong>No results found:</strong> try searching again!</div>
              
            <% end %>
          </div>
          <div class="tab-pane" id="main-search-wordcloud"><div class="alert alert-info main-page-warning">Wordcloud: to be awaited...</div></div>
          <div class="tab-pane" id="main-search-timeline"><div class="alert alert-info main-page-warning">Timeline: to be awaited...</div></div>
        </div>
      </div> <!-- tabbable -->
    </div>

  </div>
  <%#= debug(params) if Rails.env.development? %>
</div>
